# 旅游团分配管理系统 - 前端功能说明

## 功能概述

旅游团分配管理系统为Happy Tassie Travel提供了完整的导游、车辆和游客分配管理功能。系统包含分配管理和分配表格两个主要模块。

## 功能特性

### 1. 分配管理模块
- **统计展示**: 实时显示今日分配数、导游数量、车辆数量、游客总数
- **搜索筛选**: 支持按日期范围、目的地、导游姓名、车牌号、状态等多维度搜索
- **分配操作**: 新建、编辑、查看详情、取消、删除分配记录
- **状态管理**: 支持已确认、进行中、已完成、已取消等状态流转

### 2. 分配表格模块
- **详细展示**: 类似"图2"的表格格式，清晰展示所有分配信息
- **日期选择**: 可选择特定日期查看当日所有分配记录
- **打印导出**: 支持打印和导出功能，便于线下使用
- **统计汇总**: 显示选定日期的分配统计信息

## 页面访问

访问路径：`/tour-assignment`

在左侧导航菜单中位置：**分配管理**

## 界面操作指南

### 分配管理界面

#### 1. 查看统计信息
页面顶部四个卡片展示今日分配概况：
- 今日分配：今天的分配记录总数
- 导游数量：今日参与分配的导游数量
- 车辆数量：今日参与分配的车辆数量
- 游客总数：今日分配的游客总人数

#### 2. 搜索和筛选
使用搜索表单可以按以下条件筛选：
- **分配日期**: 选择日期范围
- **目的地**: 输入目的地关键词
- **导游姓名**: 输入导游姓名
- **车牌号**: 输入车辆车牌号
- **状态**: 选择分配状态

#### 3. 新建分配
点击"新建分配"按钮，填写以下信息：

**基本信息**
- 分配日期（必填）
- 目的地（必填）

**导游和车辆**
- 导游选择（必填，系统会检查可用性）
- 车辆选择（必填，系统会检查可用性）

**游客信息**
- 总人数（必填）
- 成人数量（必填）
- 儿童数量

**联系信息**
- 联系人（必填）
- 联系电话（必填）

**行程信息**
- 接送方式
- 接送地点
- 结束地点
- 下一个目的地
- 语言偏好

**特殊需求**
- 特殊要求
- 饮食限制
- 紧急联系人
- 备注

#### 4. 编辑分配
点击操作列的编辑按钮，可以修改分配信息。系统会重新验证导游和车辆的可用性。

#### 5. 查看详情
点击操作列的查看按钮，可以查看分配的完整详细信息，包括导游、车辆、游客、行程等所有信息。

#### 6. 取消分配
对于"已确认"状态的分配，可以点击取消按钮将其状态改为"已取消"，同时释放导游和车辆资源。

#### 7. 删除分配
可以删除不需要的分配记录，删除后会自动释放相关资源。

### 分配表格界面

#### 1. 日期选择
使用页面顶部的日期选择器选择要查看的日期。

#### 2. 查看表格
表格包含以下列信息：
- **序号**: 自动编号
- **目的地**: 旅游目的地
- **导游信息**: 导游姓名、电话、语言能力
- **车辆信息**: 车牌号、车型、座位数
- **游客人数**: 总人数、成人、儿童数量
- **联系信息**: 联系人和电话
- **接送信息**: 接送地点和方式
- **特殊需求**: 是否有特殊要求标记
- **状态**: 分配状态
- **备注**: 其他备注信息

#### 3. 统计信息
表格上方显示选定日期的汇总信息：
- 总分配数、导游数、车辆数、游客总数、涉及目的地

#### 4. 打印和导出
- **打印**: 点击打印按钮可直接打印当前页面
- **导出**: 点击导出按钮可导出Excel格式数据

## 业务逻辑特性

### 1. 资源冲突检测
- 同一导游在同一日期不能有重复分配
- 同一车辆在同一日期不能有重复分配
- 实时检查并提示冲突情况

### 2. 座位容量验证
- 自动检查车辆座位数是否满足游客人数需求
- 防止超载情况

### 3. 状态流转管理
- 已确认 → 进行中 → 已完成
- 已确认 → 已取消
- 状态变更会自动更新相关资源状态

### 4. 数据完整性
- 必填字段验证
- 电话号码格式验证
- 日期合理性检查

## 技术特性

### 1. 响应式设计
- 支持桌面端和平板设备
- 移动端友好的界面适配

### 2. 实时数据
- 统计信息实时更新
- 资源状态实时检查

### 3. 用户体验
- 操作反馈提示
- 加载状态显示
- 错误处理和提示

## 注意事项

1. **时间设置**: 分配日期不能早于当前日期
2. **资源管理**: 取消或删除分配会自动释放导游和车辆资源
3. **数据备份**: 建议定期导出重要分配数据
4. **权限控制**: 确保操作人员有相应的系统权限

## 常见问题

**Q: 为什么无法选择某个导游或车辆？**
A: 可能是该导游或车辆在选定日期已有其他分配，请选择其他资源或更改日期。

**Q: 如何批量操作多个分配？**
A: 目前系统支持单个分配操作，如需批量操作，请联系系统管理员。

**Q: 分配表格支持哪些导出格式？**
A: 目前支持Excel格式导出，打印功能支持PDF输出。

**Q: 如何查看历史分配记录？**
A: 在分配管理界面使用日期范围搜索可以查看任意时间段的分配记录。 